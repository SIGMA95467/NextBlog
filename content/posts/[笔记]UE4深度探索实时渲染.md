---
toc: true
backtotop: true
title: "[笔记]UE4深度探索实时渲染"
date :  2022-03-25T18:04:33+08:00
tags : ["UE4"]
draft : false
---

实时渲染是一个损失性能的过程，你做的每一件事都是一种损耗，我们的目标是想方设法平稳达到目标帧率。

![hdRl7r0dYX.png](https://z4a.net/images/2022/03/30/hdRl7r0dYX.png)

- 所有环节追求尽可能高效（废话

- 严格的流程标准与限制

  先确定资源规格，再基于这些规格设计架构

- 并非所有东西都是即使渲染，而是预渲染和实时渲染结合

- 混合方案

  [![ck0xK6XfD5.png](https://z4a.net/images/2022/03/30/ck0xK6XfD5.png)](https://z4a.net/image/2yvv2v)

### 延迟渲染

- 每个阶段不会拥有之前阶段的信息
- 擅长渲染动态光照、提供高质量的渲染画面
- 可灵活调整渲染结果

### 前向渲染

- 光照和着色不会被延迟，在渲染几何体时同时完成
- 随着功能的增加，屏幕后画面会越来越复杂，不能灵活调整
- 支持MSAA获得更好的抗锯齿
- 因为在同一个环节完成，所以有个多信息来支持更灵活的光照
- 前向渲染更适合渲染半透明

在真正渲染前，就会执行计算，图中30FPS意味着CPU与GPU有66ms延迟，但他们是同步的



因为实时渲染，观察者会随时做出变化，所以在渲染前我们需要计算对象的具体位置，

计算动画、模型和对象的位置、物理、AI、spawn、destroy等一切可能影响对象位置的因素

虽然知道了对象位置，但我们不需要把所有对象都渲染出来，只需要渲染可见内容就行了。大多数工作由CPU完成，GPU也会处理一部分。

遮挡阶段(Occlusion process)建立一张表记录所有可见对象和模型，**逐对象**进行遮挡

执行顺序

1. 距离剔除(Distance Culling)
2. 视锥体剔除(Frustum Culling)
3. 可见性预计算(Precomputed Visibility)
4. 遮挡剔除(Occlusion Culling)

